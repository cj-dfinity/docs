How to deploy a "hello world" smart contract/dapp
================================================

This is a fast and minimalist tutorial for deploying a "hello world" smart contract or dapp in 20 minutes or less.

== Concepts

=== Concepts for dapp running locally

==== 1. Canister smart contract/dapp
A '''canister''' is a type of smart contract that bundles code and state. A canister can be deployed as a smart contract on the Internet Computer and accessed over the Internet.

=== Concepts for dapp running on-chain

==== 1. Cycles

On the Internet Computer, a '''cycle''' is the unit of measurement for resources consumed in the form of processing, memory, storage, and network bandwidth. Every canister has a cycles account to which resources consumed by the canister are charged. The Internet Computer’s utility token (ICP) can be converted to cycles and transferred to a canister. ICP can always be converted to cycles using the current price of ICP measured in [SDR] using the convention that one trillion cycles correspond to one SDR.

==== 2. NNS Frontend dapp
For the context of this tutorial, the '''NNS frontend dapp''' is a wallet which will store one's ICP (which will be converted to cycles).

==== 3. Internet Identity
For the context of this tutorial, '''Internet Identity''' is an anonymizing blockchain authentication system running on the Internet Computer.

== Platforms and operating systems supported 

* Linux
* macOS (12.* Monterey)
* Windows

== 1. Installing tools (5 min)

To build a dapp, users need to install the following:

=== 1.1 Node.js and supporting software

There are many ways of installing node.js, including from [https://nodejs.org/en/download/ nodejs.org website].

Besides installing node.js, users need to also install:
* Node Package Manager (NPM).
* Node Version Manager (NVM), see [https://github.com/nvm-sh/nvm#installing-and-updating installing NVM]

=== 1.2 The Canister SDK (AKA "dfx") 

The Canister SDK used in this article is called '''dfx''' and it is maintained by the DFINITY foundation. There are many SDK's so this is just one.

To install, one needs to run:
[source,bash]
----
$ sh -ci "$(curl -fsSL https://sdk.dfinity.org/install.sh)"
----


To verify it is properly installed:
[source,bash]
----
$ dfx --version
----

Terminal should look like this (at least version 0.9.2):

image:quickstart/dfx-version.png[dfx version]

== 2. Create a default project (5 min)

=== 2.1 Create a new project 
Dapps on the Internet Computer start as projects. You create projects using the dfx parent command and its subcommands.

For this tutorial, we’ll start with the default sample dapp to illustrate creating dapp using the starter files in a project. When you create a new project, the dfx command-line interface adds a default project directory structure to your workspace. We cover the template files that make up a project directory in the Explore the default project tutorial.

To create a new project for your first application:

2.1 Open a '''terminal shell''' on your local computer, if you don’t already have one open.

2.2 Create a new project named hello by running the following command:

[source,bash]
----
$ dfx new hello
----


The <code>dfx new hello</code> command creates a new <code>hello</code> project directory, template files, and a new hello Git repository for your project. Your terminal should look like this:

image:quickstart/dfx-new-hello-1.png[dfx new]

image:quickstart/dfx-new-hello-2.png[dfx new]


2.3 Move to your project directory by running the following command:
[source,bash]
----
$ cd hello
----

Your directory should look like this:

[[File:Cd hello.png||500px| frameless]]
image:quickstart/cd-hello.png[cd new]


== 3. Deploying dapp to local machine (1 min

=== Using two terminal windows/tabs

Now that the code is there, the next step is to spin up a local version of the IC on local machine. For this, developers should keep two terminals open:
* *Terminal window/tab A:* This will show the local version of the IC running
** This is analogous to how developers often start local servers in web2 projects (e.g. node.js's Express, python's Django, Ruby's Rails, etc...)
* *Terminal window/tab B:* This will be used to send *messages* to the local version of the IC
** This is analogous to how developers send HTTP API messages to servers running locally (e.g. Postman, Panic).

For ease, this tutorial will distinguish between both windows by color scheme:

*Terminal A*

image:quickstart/dfx-new-hello-2.png[dfx new]


*Terminal B*

image:quickstart/terminal-b-ls.png[terminal b ls]


=== 3.1 Start the local version of the IC (Terminal A)

1. Use the Terminal window or tab on your local computer.

2. Navigate to the root directory for your project, if necessary. In this tutorial, you should be in the folder <code>/hello</code> because that is the name of the project created in section 2 above.

3. Start the local canister execution environment on your computer in your second terminal by running the following command:

[source,bash]
----
$ dfx start
----

image:quickstart/terminal-a-dfx-start.png[dfx start]


Note: Depending on your platform and local security settings, you might see a warning displayed. If you are prompted to allow or deny incoming network connections, click Allow. 

*That is it, there is now a local version of the IC running on your machine. Leave this window/tab open and running while you continue.* If the window/tab is closed, the local version of the IC will not be running and the rest of the tutorial will fail.

=== 3.2 Deploy the "hello" dapp to the local version of the IC (Terminal B)

Note: since this is a local version of the IC, this has fewer steps than deploying to mainnet (which requires cycles).

To deploy your first dapp locally:

1. Check that you are still in the root directory for your project, if needed.

Ensure that node modules are available in your project directory, if needed, by running the following command (it does not hurt to run this many times):

[source,bash]
----
$ npm install
----

image:quickstart/terminal-b-npm-install.png[npm install]



2. Register, build, and deploy your first dapp by running the following command:

[source,bash]
----
$ dfx deploy
----

image:quickstart/terminal-b-dfx-deploy.png[dfx deploy]

=== 3.3 Testing your dapp is deployed

== 4. Deploying on-chain (10 min)==

=== Important note about cycles===

In order to run on-chain, IC dapps require cycles to pay for compute and storage. This means that the developer needs to acquire cycles and fill their canister with them. Cycles can be converted from [[ICP token]]. 

This flow may be surprising to people familiar with Web2 software where they can add a credit card to a hosting provider, deploy their apps, and get charged later. In Web3, blockchains require their smart contracts consume ''something'' (whether it is Ethereum's gas or the IC's cycles). The next steps will likely be familiar to those in crypto, but new entrants may be confused as to why first step of deploying a dapp is often "go get tokens."

=== 4.1 Acquiring cycles (5 min)

=== 4.2 Loading the canister with cycles (2 min)

=== 4.3 Deploying on-chain (1 min)

=== 4.4 Testing the dapp (2 min)

== Troubleshooting

=== Resources

* Developers who hit any blockers are encouraged to search or post in [https://forum.dfinity.org/ the IC developer forum].
